%%

\begin{frame}{Общий синтаксис}

	Условие:
	\begin{itemize}
		\item Exit status любой программы
		\item test или $[$ 
		\item Двойные скобки {\bf (( ... ))} и конструкция {\bf let}
	\end{itemize}


	Конструкция для сравнения:
	\begin{itemize}
		\item \&\& и ||
		\item if/then/else
	\end{itemize}

\end{frame}

\begin{frame}[fragile]{Двойные скобки и {\bf let}}

	Позволяют производить арифметические вычисления!

	\pause
	Пример:
\begin{lstlisting}[language=bash]
a=$(( 5 + 3 ))
let "b = (( a + 10 ))"
echo $a $b
\end{lstlisting}

	\pause
	Операции:
	\begin{itemize}
		\item (( 0 \&\& 1 )) -- логическое "И"
		\item (( 0 || 1 )) -- логическое "ИЛИ"
		\item (( 0 \& 1 )) -- побитовое "И"
		\item (( 0 | 1 )) -- побитовое "ИЛИ"
	\end{itemize}

	{\bf Практическое задание:} \\
	написать скрипт, которому в качестве параметров передается 2 значения. Вывести на экран результаты логических и побитовых операций. 
\end{frame}


\begin{frame}[fragile]{test}

	\begin{itemize}
	    \item ! -- отрицание
	    \item -z СТРОКА
	    \item СТРОКА1 = СТРОКА2
	    \item СТРОКА1 != СТРОКА2
	    \item ЦЕЛОЕ1 -eq ЦЕЛОЕ2
	    \item ЦЕЛОЕ1 -ge ЦЕЛОЕ2
	    \item ЦЕЛОЕ1 -lt ЦЕЛОЕ2
	    \item -d ФАЙЛ
	    \item -e ФАЙЛ
	    \item -f ФАЙЛ
	\end{itemize}

\end{frame}

\begin{frame}[fragile]
	\frametitle{Пример}

	Написать скрипт сравнивающий переменную окружения с заранее заданным значением:
	
	\small\begin{lstlisting}
#!/bin/bash

VAR=$1
STRING=test
[ $STRING == $VAR ] && echo "Строки одинаковы" || echo "Строки разные"
exit
	\end{lstlisting}
    \normalsize
	И запустить этот скрипт:
	
	\begin{enumerate}
		\item {\tt sh script.sh string}
		\item {\tt sh script.sh test}
		\item {\tt sh script.sh}
	\end{enumerate}

\end{frame}

\begin{frame}
	\frametitle{Пример: варианты исправления}

		\begin{enumerate}
			\item {\tt [ ``\$STRING'' == ``\$VAR'' ] }
			\item {\tt [ z\$STRING == z\$VAR ] }
		\end{enumerate}

\end{frame}

\begin{frame}[fragile]{\&\& и ||}
	Синтаксис:
\begin{verbatim}
условие && true || false
\end{verbatim}

	\pause
	Пример:
\begin{lstlisting}[language=bash]
test -z "$DISPLAY" && echo "text mode" || echo "graphical mode"
\end{lstlisting}
	
	\pause

	\begin{itemize}
	    \item Запустить команды "true" и "false"
	    \item В случае успеха вывести "успех"
	    \item В случае неуспеха вывести "неудача"
	\end{itemize}
\end{frame}



\begin{frame}[fragile]{Синтаксис {\bf if}}

	\begin{columns}
		\column{0.4\textwidth}
	
	\begin{lstlisting}[language=bash]
if [ условие1 ]
then
   . . .
elif [ условие2 ]
then
   . . .
else
   . . .
fi
\end{lstlisting}
		\column{0.6\textwidth}
	{\bf Практическое задание:} \\
	\begin{itemize}

		\item с помощью конструкции {\bf if} проверить существует ли файловый объект передаваемый в качестве параметра скрипту
		\item если нет, то создать директорию с таким именем
		\item если cуществует и файл является shell-скриптом, то запустить его
		\item если существует и является директорией, то вывести на экран первых 5 файлов в этой директории
	\end{itemize}
	\end{columns}
\end{frame}


%\begin{frame}[fragile]{}

%\end{frame}

